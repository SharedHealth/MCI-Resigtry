package org.sharedhealth.mci.validation.constraintvalidator;

import org.sharedhealth.mci.validation.constraints.CountryCode;

import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;
import java.util.Arrays;
import java.util.List;

public class CountryCodeValidator implements ConstraintValidator<CountryCode, String> {

    private static final String[] countryCodes = {"248","004","008","012","016","020","024","660","010","028","032","051","533","036","040","031","044","048","050","052","112","056","084","204","060","064","068","070","072","074","076","086","096","100","854","104","108","116","120","124","132","136","140","148","152","156","162","166","170","174","180","178","184","188","384","191","192","196","203","208","262","212","214","218","818","222","226","232","233","231","238","234","242","246","250","254","258","260","266","270","268","276","288","292","300","304","308","312","316","320","324","624","328","332","334","340","344","348","352","356","360","364","368","372","380","388","392","400","398","404","296","408","410","414","417","418","428","422","426","430","434","438","440","442","446","807","450","454","458","462","466","470","584","474","478","480","175","484","583","498","492","496","500","504","508","516","520","524","528","530","540","554","558","562","566","570","574","580","578","512","586","585","275","591","598","600","604","608","612","616","620","630","634","638","642","643","646","654","659","662","666","670","882","674","678","682","686","891","690","694","702","703","705","090","706","710","239","724","144","736","740","744","748","752","756","760","158","762","834","764","626","768","772","776","780","788","792","795","796","798","800","804","784","826","840","581","858","860","548","336","862","704","092","850","876","732","887","894","716"};

    @Override
    public void initialize(CountryCode constraintAnnotation) {

    }

    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        if(value == null){
            return true;
        }
        List<String> list = Arrays.asList(countryCodes);
        boolean b = list.contains(value);
        if (b == false) {
            return false;
        }
        return true;
    }
}
